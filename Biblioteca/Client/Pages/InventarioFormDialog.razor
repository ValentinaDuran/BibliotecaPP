@using Biblioteca.BD.Data.Entidades
@using Biblioteca.Client.Services
@inject IHttpService http
@inject NavigationManager NavManager
@using MudBlazor
<MudDialog>
    <DialogContent>
        <MudForm>
            <MudGrid>
                    <MudItem xs="6">
                        <MudTextField @bind-Value="newInventario.TituloNombre" Label="Título/Nombre" />
                    </MudItem>
                    <MudItem xs="6">
                        <MudTextField @bind-Value="newInventario.AutorMarca" Label="Autor/marca" />
                    </MudItem>
                    <MudItem xs="6">
                        <MudTextField @bind-Value="newInventario.Observacion" Label="Observación" />
                    </MudItem>
                    <MudItem xs="6">
                        <MudSelect T="int" @bind-Value="newInventario.TipoId" Label="Tipo">
                            @foreach (var tipo in tipos)
                            {
                                <MudSelectItem Value="@tipo.Id">@tipo.TipoMat</MudSelectItem>
                            }
                        </MudSelect>
                    </MudItem>
            </MudGrid>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancelar</MudButton>
        <MudButton Color="Color.Primary" OnClick="Submit">Agregar</MudButton>
    </DialogActions>
</MudDialog>
@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    private Inventario newInventario = new Inventario();
     static List<Tipo> tipos = new List<Tipo>
    {
        new Tipo{ Id= 1,TipoMat= "Libro"},
        new Tipo{ Id= 2,TipoMat= "Mapa"},
        new Tipo{ Id= 3,TipoMat= "ÚtilGeometria"},
        new Tipo{ Id= 4,TipoMat= "Computadora"},
        new Tipo{ Id= 5,TipoMat= "Proyector"},
        new Tipo{ Id= 6,TipoMat= "Revista"},
        new Tipo{ Id= 7,TipoMat= "Ludoteca"},
        new Tipo{ Id= 8,TipoMat= "InstrumentoMusical"},
   
    };


    private async void Submit(){

         var httpRespuesta = await http.Post<Inventario>("api/InventarioController", newInventario);
    if (!httpRespuesta.Error)
    {
   
        MudDialog.Close();
        NavManager.NavigateTo("/inventario-list", forceLoad: true);
    }
    else
    {
     
        var body = httpRespuesta.HttpResponseMessage;
    }
    }

    void Cancel() => MudDialog.Cancel();
}
